var cheerio = require('cheerio');

module.exports = function(content, html_injection_items, disable) {
    if (!html_injection_items) {
      html_injection_items = this.config.html_injection_items;
    }
    if (html_injection_items) {
      injection_count = html_injection_items.length;
    }
    if ((injection_count > 0) && disable !== true) {
      var $ = cheerio.load(content);
      var paragraph_count = $('p').length
      
      if (paragraph_count > 3) {
        var interval = Math.floor(paragraph_count / (injection_count+1))
        var insert_point = interval
        for (i = 0; i < injection_count; i++) {
          //console.log('inserted html at ' + insert_point)
          $('p').eq(insert_point).after('<div class="injection_html_item" data-injection-html="' + html_injection_items[i] + '"></div>')
          insert_point = insert_point + interval
        }
        //console.log(interval)
        content = $.html();
      }
      
    }
    return content;
    
};